<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	<input type="text" id="name">
	<br>
	<input type="text" id="clas">
	<br>
	<input type="text" id="role">
	<button onclick="Sub()">Submit</button>
	<div id="block"></div>
</body>
	<script>
	// import MongoClient

	// async function main(){
	// 	const { MongoClient, ServerApiVersion } = require('mongodb');
	// 	const uri = "mongodb+srv://datduyle:onetwothree123@cluster0.ksyosms.mongodb.net/?retryWrites=true&w=majority";
	// 	const client = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true, serverApi: ServerApiVersion.v1 });
	// 	await client.connect(err => {
	// 	  const collection = client.db("UserList").collection("user");
	// 	  // perform actions on the collection object


	// 	  await client.close();
	// 	});	
	// }

	function Sub() {
		// body...
		const name=document.querySelector("#name").value;
		const clas=document.querySelector("#clas").value;
		const role=document.querySelector("#role").value;
		
		let a=new Date;
		let id=a.toJSON();

		const user={
			key:id,
			name:name,
			clas:clas,
			roles:role
		};
		console.log(user);
		let option={
			method:"POST",
			headers:{
				"Content-Type":"application/json"
			},
			body:JSON.stringify(user),
		};
		fetch("https://strongexaltedtads.luis-dati.repl.co/user",option)
	}

	const block=document.querySelector("#block");
	fetch("https://strongexaltedtads.luis-dati.repl.co/user")
		.then(function(res){
			return res.json()
		})
		.then(function(res){
			let htmls=res.map(function(data){
				return `
					<li>
						<div>${data.name}</div>
						<div>${data.clas}</div>
						<div>${data.roles}</div>
						</br>
					</li>
				`
			});
			block.innerHTML=htmls.join("");
			
		})
	</script>
</html>
